<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>KS Xplain - 3-Step Unlock</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- ‚úÖ Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-1B38ZV38JF"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-1B38ZV38JF');
  </script>

  <style>
    :root{
      --brand:#00ffae;
      --dark:#0b0b10;
      --card:#11121a;
      --text:#e9f2ff;
      --muted:#a0aec0;
      --radius:14px;
      --shadow:0 10px 30px rgba(0,0,0,.45);
      --glow:0 0 18px rgba(0,255,174,.45);
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:Segoe UI,system-ui,Roboto,Arial;
      color:var(--text); background:linear-gradient(135deg,#0a0f1f 0%, #111 55%, #1a0f1f 100%);
      display:flex; flex-direction:column; align-items:center;
    }
    .wrap{width:100%; max-width:940px; padding:18px}
    .header{display:flex; gap:10px; align-items:center; justify-content:center;
      padding:16px; border-radius:var(--radius);
      background:rgba(255,255,255,.04); box-shadow:var(--shadow); margin-top:14px}
    .header img{width:42px;height:42px}
    .brand{font-size:28px; font-weight:800; color:var(--brand); text-shadow:var(--glow)}

    .card{background:var(--card); border-radius:var(--radius); box-shadow:var(--shadow);
      padding:22px; margin-top:18px; animation:fadeIn .5s ease;}

    .progress-head{display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; font-weight:600;}
    .progress-text small{color:var(--muted); font-weight:500}
    .bar{height:10px; background:#1b1d29; border-radius:999px; overflow:hidden}
    .bar-fill{height:100%; width:0%; background:linear-gradient(90deg,#16ffd0,#60ffa1);
      box-shadow:0 0 18px rgba(22,255,208,.55); transition:width .5s ease;}

    .btns{display:flex; gap:12px; flex-wrap:wrap; justify-content:center; margin-top:18px}
    .btn{border:0; cursor:pointer; padding:14px 20px; border-radius:12px;
      font-weight:700; font-size:16px; color:#04130e; background:var(--brand);
      box-shadow:var(--glow),0 8px 18px rgba(0,0,0,.35); transition:.2s}
    .btn.secondary{background:#222736; color:#cde; border:1px solid rgba(255,255,255,.06)}
    .btn[disabled]{opacity:.55; cursor:not-allowed}

    .timer{margin-top:14px; font-weight:700; color:#b8ffe9;
      background:rgba(0,255,174,.08); border:1px dashed rgba(0,255,174,.35);
      padding:10px 14px; border-radius:999px; display:none;
      width:max-content; margin-inline:auto; text-align:center;}

    .socials{display:flex; gap:12px; justify-content:center; flex-wrap:wrap; margin-top:18px}
    .social{display:inline-flex; align-items:center; gap:8px; padding:10px 14px;
      border-radius:12px; text-decoration:none; color:#dff; font-weight:700;
      background:#1b2030; border:1px solid rgba(255,255,255,.06);}
    .social img{width:22px; height:22px}

    .tutorial{margin-top:22px}
    .tutorial h3{margin:0 0 10px; color:var(--brand); text-align:center;}
    .yt-wrap{position:relative; padding-bottom:56.25%; height:0; overflow:hidden; border-radius:16px;}
    .yt-wrap iframe{position:absolute; inset:0; width:100%; height:100%; border:0}

    .note{color:var(--muted); font-size:13px; margin-top:14px}

    @keyframes fadeIn{from{opacity:0; transform:translateY(6px)} to{opacity:1; transform:none}}
  </style>
</head>
<body>
  <div class="wrap">
    <!-- Header -->
    <div class="header">
      <img src="https://i.ibb.co/JWWZm0dS/Picsart-25-08-04-01-13-55-513.png" alt="KS Logo"/>
      <div class="brand">KS Xplain</div>
    </div>

    <!-- Main card -->
    <div class="card">
      <div class="progress-head">
        <div class="progress-text">
          <div id="stepTitle">Step 1 of 3</div>
          <small id="stepSubtitle">Watch Ad 1 ‚Üí wait 10s ‚Üí Next</small>
        </div>
        <strong id="stepTag">Ad 1</strong>
      </div>
      <div class="bar"><div id="barFill" class="bar-fill"></div></div>

      <!-- Guide text -->
      <p style="text-align:center; font-weight:700; margin-top:20px;">üëâ Click below, watch the Ad, wait 10s, then continue</p>

      <div class="btns">
        <button id="watchBtn" class="btn">‚ñ∂Ô∏è Watch Ad 1</button>
        <button id="nextBtn" class="btn secondary" style="display:none">‚û°Ô∏è Next</button>
      </div>

      <!-- Timer -->
      <div id="timerChip" class="timer">‚è≥ Please wait‚Ä¶ 10s</div>

      <p class="note">Tip: Har step complete hone ke baad Next button aayega. Last step pe <b>Get Link</b> milega.</p>
    </div>

    <!-- Socials -->
    <div class="card">
      <div style="text-align:center; margin-bottom:6px; color:var(--muted)">Follow us</div>
      <div class="socials">
        <a class="social" href="https://www.instagram.com/ksxplain.12?igsh=MXM0enp3eTQwYXk3MA==" target="_blank">
          <img src="https://img.icons8.com/fluency/48/instagram-new.png" alt="">Instagram
        </a>
        <a class="social" href="https://youtube.com/@ksxplain?si=pCfnw7TpBAeg79zn" target="_blank">
          <img src="https://img.icons8.com/fluency/48/youtube-play.png" alt="">YouTube
        </a>
        <a class="social" href="https://t.me/ksxplain12" target="_blank">
          <img src="https://img.icons8.com/fluency/48/telegram-app.png" alt="">Telegram
        </a>
      </div>
    </div>

    <!-- Tutorial -->
    <div class="card tutorial">
      <h3>üìΩÔ∏è How to unlock?</h3>
      <div class="yt-wrap">
        <iframe 
          src="https://player.vimeo.com/video/1115288169?badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479&amp;dnt=1" 
          frameborder="0" 
          allow="autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media; web-share" 
          referrerpolicy="strict-origin-when-cross-origin" 
          style="width:100%;height:100%;border-radius:16px;" 
          title="How To Open KS Link üé•">
        </iframe>
      </div>
    </div>
    <script src="https://player.vimeo.com/api/player.js"></script>
  </div>

  <script>
    // CONFIG
    const adLinks = [
      "https://otieu.com/4/9678202",
      "https://diarrhoeaeaglesunday.com/ybayrqrb9?key=5a1e8836070e475b50e19fd31de02887",
      "https://otieu.com/4/8152255"
    ];
    const WAIT_SECONDS = 10;
    const reportLink = "https://t.me/KSMovieRequest"; // error report button

    const urlParams = new URLSearchParams(location.search);
    const finalLink = urlParams.get("final");

    let currentStep = 1, ticking=false, countdownId=null;

    const watchBtn=document.getElementById("watchBtn");
    const nextBtn=document.getElementById("nextBtn");
    const timerChip=document.getElementById("timerChip");
    const stepTitle=document.getElementById("stepTitle");
    const stepSubtitle=document.getElementById("stepSubtitle");
    const stepTag=document.getElementById("stepTag");
    const barFill=document.getElementById("barFill");

    function setProgress(step){
      stepTitle.textContent=`Step ${step} of 3`;
      stepTag.textContent= step<3 ? `Ad ${step}` : `Final`;
      stepSubtitle.textContent = step<3 ?
        `Watch Ad ${step} ‚Üí wait ${WAIT_SECONDS}s ‚Üí Next` :
        `Watch Ad 3 ‚Üí wait ${WAIT_SECONDS}s ‚Üí Get Link`;
      watchBtn.textContent = `‚ñ∂Ô∏è Watch Ad ${step}`;
      watchBtn.disabled=false;
      nextBtn.style.display="none";
      timerChip.style.display="none";
      timerChip.textContent=`‚è≥ Please wait‚Ä¶ ${WAIT_SECONDS}s`;
    }

    function startCountdown(){
      let left=WAIT_SECONDS;
      timerChip.style.display="block";
      timerChip.textContent=`‚è≥ Please wait‚Ä¶ ${left}s`;
      watchBtn.disabled=true; ticking=true;

      if(countdownId) clearInterval(countdownId);
      countdownId=setInterval(()=>{
        left--;
        if(left>0){
          timerChip.textContent=`‚è≥ Please wait‚Ä¶ ${left}s`;
        }else{
          clearInterval(countdownId); ticking=false;
          if(currentStep<3){
            nextBtn.textContent="‚û°Ô∏è Next";
            nextBtn.style.display="inline-block";
          }else{
            nextBtn.textContent="üîì Get Link";
            nextBtn.style.display="inline-block";
          }
          timerChip.textContent="‚úÖ Done! Continue below.";
          // progress update here
          const pct=currentStep===1?33:(currentStep===2?66:100);
          barFill.style.width=pct+"%";
        }
      },1000);
    }

    function openAdFor(step){
      const link=adLinks[step-1];
      if(!link){alert("Ad link missing."); return;}
      window.open(link,"_blank");
      startCountdown();
    }

    function goNext(){
      if(ticking) return;
      if(currentStep<3){
        currentStep++; setProgress(currentStep);
        window.scrollTo({top:0,behavior:'smooth'});
      }else{
        if(!finalLink){
          document.body.innerHTML=`<div style="display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;color:white;text-align:center;">
          <h2>‚ùå Broken Link</h2>
          <p>Please report this issue:</p>
          <a href="${reportLink}" target="_blank" style="background:#00ffae;color:#000;padding:12px 20px;border-radius:8px;font-weight:700;text-decoration:none;">üì© Report Here</a>
          </div>`;
          return;
        }
        location.href=finalLink;
      }
    }

    setProgress(currentStep);
    watchBtn.addEventListener("click",()=>{if(!ticking)openAdFor(currentStep);});
    nextBtn.addEventListener("click",goNext);
  </script>

<script>(s=>{s.dataset.zone=9665186,s.src='https://groleegni.net/vignette.min.js'})([document.documentElement, document.body].filter(Boolean).pop().appendChild(document.createElement('script')))</script>

</body>
</html>
